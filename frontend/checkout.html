<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Windi | Checkout</title>
  <link rel="manifest" href="/manifest.json" />
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="app-page">
    <header class="app-topbar">
      <div class="app-topbar-inner">
        <div class="app-title">
          <a class="icon-btn" href="/cart" aria-label="Volver al carrito">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M15 18l-6-6 6-6"/>
            </svg>
          </a>
          <h1>Checkout</h1>
        </div>
        <div class="app-actions">
          <a class="icon-btn" href="/marketplace" aria-label="Marketplace">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><path d="M9 22V12h6v10"/>
            </svg>
          </a>
        </div>
      </div>
    </header>

    <div class="card">
      <div class="title-row"><span class="icon">R</span><h2>Resumen</h2></div>
      <div id="summary" class="list"></div>
    </div>

    <div class="card" style="margin-top:12px;">
      <div class="title-row"><span class="icon">E</span><h2>Entrega</h2></div>
      <form id="checkoutForm">
        <input id="deliveryAddress" placeholder="Direccion de entrega en Rio Grande" required />
        <div class="muted">Selecciona una direccion de la lista para continuar.</div>
        <div id="shippingHint" class="muted">Calculando envio automaticamente...</div>
        <input id="customerWhatsapp" type="tel" placeholder="WhatsApp (obligatorio para coordinar la entrega)" />
        <div class="muted">Usamos tu WhatsApp solo para coordinar la entrega.</div>
        <textarea id="deliveryNotes" placeholder="Notas de entrega"></textarea>
        <select id="paymentMethod" required>
          <option value="cash_on_delivery">Efectivo (Al recibir)</option>
          <option value="transfer_on_delivery">Transferencia (Al recibir)</option>
          <option value="mp_card">Tarjeta (Mercado Pago)</option>
        </select>
        <button type="submit">Confirmar pedido</button>
      </form>
    </div>

    <div class="card" style="margin-top:12px;">
      <div class="title-row"><span class="icon">S</span><h2>Sesion cliente</h2></div>
      <div class="row">
        <input id="loginEmail" type="email" placeholder="Email" />
        <input id="loginPassword" type="password" placeholder="Contrasena" />
      </div>
      <div class="row">
        <button id="loginBtn" type="button" class="secondary">Ingresar</button>
      </div>
      <div id="authState" class="muted"></div>
    </div>

    <div id="status" class="footer"></div>
  </div>

  <script src="/js/sw-register.js"></script>
  <script type="module" src="/js/checkout.js"></script>
</body>
</html>
